function transformSchArr(a){var c,d,e,b=[];for(c=0,d=a.length;d>c;c++)e={id:a[c].school_id,name:a[c].school_name},b.push(e);return b}function getCurrentDate(){var a=new Date,b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate();return b+"-"+c+"-"+d}function isDate(a){var b=a.match(/((^((1[8-9]\d{2})|([2-9]\d{3}))(-)(10|12|0?[13578])(-)(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))(-)(11|0?[469])(-)(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))(-)(0?2)(-)(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)(-)(0?2)(-)(29)$)|(^([3579][26]00)(-)(0?2)(-)(29)$)|(^([1][89][0][48])(-)(0?2)(-)(29)$)|(^([2-9][0-9][0][48])(-)(0?2)(-)(29)$)|(^([1][89][2468][048])(-)(0?2)(-)(29)$)|(^([2-9][0-9][2468][048])(-)(0?2)(-)(29)$)|(^([1][89][13579][26])(-)(0?2)(-)(29)$)|(^([2-9][0-9][13579][26])(-)(0?2)(-)(29)$))/);return null==b?!1:!0}function isTime(a){console.log(a);var b=a.match(/^(\d{1,2})(:)?(\d{1,2})$/);return null==b?!1:b[2]?b[1]>24||b[3]>60?!1:!0:!1}function ajaxFileUpload(a,b){$.ajaxFileUpload({url:b,secureuri:!1,fileElementId:a,dataType:"json",success:function(a,b){console.log(a),console.log(b)},error:function(a,b,c){alert(c)}})}function callbackAlert(a,b){1==a?b?alert(b):alert("操作成功"):2==a?alert("没有权限!"):alert("系统错误，请稍后重试!")}function getDataFromStorage(a){var b=localStorage.getItem(a);return b=JSON.parse(b)}var postData,getData,checkInputInObj;jQuery.extend({createUploadIframe:function(a,b){var c="jUploadFrame"+a,d='<iframe id="'+c+'" name="'+c+'" style="position:absolute; top:-9999px; left:-9999px"';return window.ActiveXObject&&("boolean"==typeof b?d+=' src="javascript:false"':"string"==typeof b&&(d+=' src="'+b+'"')),d+=" />",jQuery(d).appendTo(document.body),jQuery("#"+c).get(0)},createUploadForm:function(a,b,c){var g,h,i,d="jUploadForm"+a,e="jUploadFile"+a,f=jQuery('<form  action="" method="POST" name="'+d+'" id="'+d+'" enctype="multipart/form-data"></form>');if(c)for(g in c)jQuery('<input type="hidden" name="'+g+'" value="'+c[g]+'" />').appendTo(f);return h=jQuery("#"+b),i=jQuery(h).clone(),jQuery(h).attr("id",e),jQuery(h).before(i),jQuery(h).appendTo(f),jQuery(f).css("position","absolute"),jQuery(f).css("top","-1200px"),jQuery(f).css("left","-1200px"),jQuery(f).appendTo("body"),f},ajaxFileUpload:function(a){var b,c,e,f,g,h,i;a=jQuery.extend({},jQuery.ajaxSettings,a),b=(new Date).getTime(),c=jQuery.createUploadForm(b,a.fileElementId,"undefined"==typeof a.data?!1:a.data),jQuery.createUploadIframe(b,a.secureuri),e="jUploadFrame"+b,f="jUploadForm"+b,a.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart"),g=!1,h={},a.global&&jQuery.event.trigger("ajaxSend",[h,a]),i=function(b){var i,j,d=document.getElementById(e);try{d.contentWindow?(h.responseText=d.contentWindow.document.body?d.contentWindow.document.body.innerHTML:null,h.responseXML=d.contentWindow.document.XMLDocument?d.contentWindow.document.XMLDocument:d.contentWindow.document):d.contentDocument&&(h.responseText=d.contentDocument.document.body?d.contentDocument.document.body.innerHTML:null,h.responseXML=d.contentDocument.document.XMLDocument?d.contentDocument.document.XMLDocument:d.contentDocument.document)}catch(f){jQuery.handleError(a,h,null,f)}if(h||"timeout"==b){g=!0;try{i="timeout"!=b?"success":"error","error"!=i?(j=jQuery.uploadHttpData(h,a.dataType),a.success&&a.success(j,i),a.global&&jQuery.event.trigger("ajaxSuccess",[h,a])):jQuery.handleError(a,h,i)}catch(f){i="error",jQuery.handleError(a,h,i,f)}a.global&&jQuery.event.trigger("ajaxComplete",[h,a]),a.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),a.complete&&a.complete(h,i),jQuery(d).unbind(),setTimeout(function(){try{jQuery(d).remove(),jQuery(c).remove()}catch(b){jQuery.handleError(a,h,null,b)}},100),h=null}},a.timeout>0&&setTimeout(function(){g||i("timeout")},a.timeout);try{c=jQuery("#"+f),jQuery(c).attr("action",a.url),jQuery(c).attr("method","POST"),jQuery(c).attr("target",e),c.encoding?jQuery(c).attr("encoding","multipart/form-data"):jQuery(c).attr("enctype","multipart/form-data"),jQuery(c).submit()}catch(j){jQuery.handleError(a,h,null,j)}return jQuery("#"+e).load(i),{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;return data="xml"==type||data?r.responseXML:r.responseText,"script"==type&&jQuery.globalEval(data),"json"==type&&eval("data = "+data),"html"==type&&jQuery("<div>").html(data).evalScripts(),data}})(function(a){"function"==typeof define&&define.amd?define(["jquery","moment"],a):"object"==typeof exports?a(require("jquery"),require("moment")):a(jQuery,moment)}(function(a,b){function f(d,f){var g,h;this.element=d,this.options=a.extend(!0,{},e,f),this.options.moment&&(b=this.options.moment),this.constraints={next:!0,today:!0,previous:!0,nextYear:!0,previousYear:!0},this.options.events.length&&(this.options.events=this.options.multiDayEvents?this.addMultiDayMomentObjectsToEvents(this.options.events):this.addMomentObjectToEvents(this.options.events)),this.options.lengthOfTime.months||this.options.lengthOfTime.days?this.options.lengthOfTime.months?(this.options.lengthOfTime.days=null,this.intervalStart=this.options.lengthOfTime.startDate?b(this.options.lengthOfTime.startDate).startOf("month"):this.options.startWithMonth?b(this.options.startWithMonth).startOf("month"):b().startOf("month"),this.intervalEnd=b(this.intervalStart).add(this.options.lengthOfTime.months,"months").subtract(1,"days"),this.month=this.intervalStart.clone()):this.options.lengthOfTime.days&&(this.intervalStart=this.options.lengthOfTime.startDate?b(this.options.lengthOfTime.startDate).startOf("day"):b().weekday(0).startOf("day"),this.intervalEnd=b(this.intervalStart).add(this.options.lengthOfTime.days-1,"days").endOf("day"),this.month=this.intervalStart.clone()):(this.month=b().startOf("month"),this.intervalStart=b(this.month),this.intervalEnd=b(this.month).endOf("month")),this.options.startWithMonth&&(this.month=b(this.options.startWithMonth).startOf("month"),this.intervalStart=b(this.month),this.intervalEnd=b(this.month).endOf("month")),this.options.constraints&&(this.options.constraints.startDate&&(g=b(this.options.constraints.startDate),this.intervalStart.isBefore(g,"month")&&(this.intervalStart.set("month",g.month()).set("year",g.year()),this.month.set("month",g.month()).set("year",g.year()))),this.options.constraints.endDate&&(h=b(this.options.constraints.endDate),this.intervalEnd.isAfter(h,"month")&&(this.intervalEnd.set("month",h.month()).set("year",h.year()),this.month.set("month",h.month()).set("year",h.year())))),this._defaults=e,this._name=c,this.init()}var c="clndr",d="<div class='clndr-controls'><div class='clndr-control-button'><span class='clndr-previous-button'></span></div><div class='month'><%= year %> <%= month %></div><div class='clndr-control-button rightalign'><span class='clndr-next-button'></span></div></div><table class='clndr-table' border='0' cellspacing='0' cellpadding='0'><thead><tr class='header-days'><% for(var i = 0; i < daysOfTheWeek.length; i++) { %><td class='header-day'><%= daysOfTheWeek[i] %><br><%= daysOfTheWeekEn[i] %></td><% } %></tr></thead><tbody><% for(var i = 0; i < numberOfRows; i++){ %><tr><% for(var j = 0; j < 7; j++){ %><% var d = j + i * 7; %><td class='<%= days[d].classes %>'><div class='day-contents'><%= days[d].day %></div></td><% } %></tr><% } %></tbody></table>",e={events:[],ready:null,extras:null,render:null,moment:null,weekOffset:0,constraints:null,forceSixRows:null,selectedDate:null,doneRendering:null,daysOfTheWeek:null,multiDayEvents:null,startWithMonth:null,dateParameter:"date",template:d,showAdjacentMonths:!0,trackSelectedDate:!1,adjacentDaysChangeMonth:!1,ignoreInactiveDaysInSelection:null,lengthOfTime:{days:null,interval:1,months:null},clickEvents:{click:null,today:null,nextYear:null,nextMonth:null,nextInterval:null,previousYear:null,onYearChange:null,previousMonth:null,onMonthChange:null,previousInterval:null,onIntervalChange:null},targets:{day:"day",empty:"empty",nextButton:"clndr-next-button",todayButton:"clndr-today-button",previousButton:"clndr-previous-button",nextYearButton:"clndr-next-year-button",previousYearButton:"clndr-previous-year-button"},classes:{past:"past",today:"today",event:"event",inactive:"inactive",selected:"selected",lastMonth:"last-month",nextMonth:"next-month",adjacentMonth:"adjacent-month"}};f.prototype.init=function(){var b,c;if(this.daysOfTheWeek=this.options.daysOfTheWeek||[],!this.options.daysOfTheWeek)for(this.daysOfTheWeek=[],b=["星期天","星期一","星期二","星期三","星期四","星期五","星期六"],c=0;7>c;c++)this.daysOfTheWeek.push(b[c]);if(this.options.weekOffset&&(this.daysOfTheWeek=this.shiftWeekdayLabels(this.options.weekOffset)),!a.isFunction(this.options.render)){if(this.options.render=null,"undefined"==typeof _)throw new Error("Underscore was not found. Please include underscore.js OR provide a custom render function.");this.compiledClndrTemplate=_.template(this.options.template)}a(this.element).html("<div class='clndr'></div>"),this.calendarContainer=a(".clndr",this.element),this.bindEvents(),this.render(),this.options.ready&&this.options.ready.apply(this,[])},f.prototype.shiftWeekdayLabels=function(a){var c,b=this.daysOfTheWeek;for(c=0;a>c;c++)b.push(b.shift());return b},f.prototype.createDaysObject=function(c,d){var h,i,j,k,l,m,n,o,e=[],f=c.clone();if(d.diff(c,"days"),this._currentIntervalStart=c.clone(),this.eventsLastMonth=[],this.eventsNextMonth=[],this.eventsThisInterval=[],this.options.events.length&&(this.eventsThisInterval=a(this.options.events).filter(function(){var a=this._clndrStartDateObject.isAfter(d),b=this._clndrEndDateObject.isBefore(c);return b||a?!1:!0}).toArray(),this.options.showAdjacentMonths&&(h=c.clone().subtract(1,"months").startOf("month"),i=h.clone().endOf("month"),j=d.clone().add(1,"months").startOf("month"),k=j.clone().endOf("month"),this.eventsLastMonth=a(this.options.events).filter(function(){var a=this._clndrEndDateObject.isBefore(h),b=this._clndrStartDateObject.isAfter(i);return a||b?!1:!0}).toArray(),this.eventsNextMonth=a(this.options.events).filter(function(){var a=this._clndrEndDateObject.isBefore(j),b=this._clndrStartDateObject.isAfter(k);return a||b?!1:!0}).toArray())),!this.options.lengthOfTime.days)if(l=f.weekday()-this.options.weekOffset,0>l&&(l+=7),this.options.showAdjacentMonths)for(n=0;l>n;n++)o=b([c.year(),c.month(),n-l+1]),e.push(this.createDayObject(o,this.eventsLastMonth));else for(n=0;l>n;n++)e.push(this.calendarDay({classes:this.options.targets.empty+" "+this.options.classes.lastMonth}));for(m=c.clone();m.isBefore(d)||m.isSame(d,"day");)e.push(this.createDayObject(m.clone(),this.eventsThisInterval)),m.add(1,"days");if(!this.options.lengthOfTime.days)for(;0!==e.length%7;)this.options.showAdjacentMonths?e.push(this.createDayObject(m.clone(),this.eventsNextMonth)):e.push(this.calendarDay({classes:this.options.targets.empty+" "+this.options.classes.nextMonth})),m.add(1,"days");if(this.options.forceSixRows&&42!==e.length)for(;e.length<42;)this.options.showAdjacentMonths?(e.push(this.createDayObject(m.clone(),this.eventsNextMonth)),m.add(1,"days")):e.push(this.calendarDay({classes:this.options.targets.empty+" "+this.options.classes.nextMonth}));return e},f.prototype.createDayObject=function(a,c){var j,k,l,m,n,d=0,f=b(),g=[],h="",i={isToday:!1,isInactive:!1,isAdjacentMonth:!1};for(!a.isValid()&&a.hasOwnProperty("_d")&&void 0!=a._d&&(a=b(a._d)),d;d<c.length;d++)m=c[d]._clndrStartDateObject,n=c[d]._clndrEndDateObject,(a.isSame(m,"day")||a.isAfter(m,"day"))&&(a.isSame(n,"day")||a.isBefore(n,"day"))&&g.push(c[d]);return f.format("YYYY-MM-DD")==a.format("YYYY-MM-DD")&&(h+=" "+this.options.classes.today,i.isToday=!0),a.isBefore(f,"day")&&(h+=" "+this.options.classes.past),g.length&&(h+=" "+this.options.classes.event),this.options.lengthOfTime.days||(this._currentIntervalStart.month()>a.month()?(h+=" "+this.options.classes.adjacentMonth,i.isAdjacentMonth=!0,h+=this._currentIntervalStart.year()===a.year()?" "+this.options.classes.lastMonth:" "+this.options.classes.nextMonth):this._currentIntervalStart.month()<a.month()&&(h+=" "+this.options.classes.adjacentMonth,i.isAdjacentMonth=!0,h+=this._currentIntervalStart.year()===a.year()?" "+this.options.classes.nextMonth:" "+this.options.classes.lastMonth)),this.options.constraints&&(k=b(this.options.constraints.endDate),j=b(this.options.constraints.startDate),this.options.constraints.startDate&&a.isBefore(j)&&(h+=" "+this.options.classes.inactive,i.isInactive=!0),this.options.constraints.endDate&&a.isAfter(k)&&(h+=" "+this.options.classes.inactive,i.isInactive=!0)),!a.isValid()&&a.hasOwnProperty("_d")&&void 0!=a._d&&(a=b(a._d)),l=b(this.options.selectedDate),this.options.selectedDate&&a.isSame(l,"day")&&(h+=" "+this.options.classes.selected),h+=" calendar-day-"+a.format("YYYY-MM-DD"),h+=" calendar-dow-"+a.weekday(),this.calendarDay({date:a,day:a.date(),events:g,properties:i,classes:this.options.targets.day+h})},f.prototype.render=function(){var g,h,i,j,k,l,m,n,o,a={},c=null,d=null,e=this.intervalEnd.clone().add(1,"years"),f=this.intervalStart.clone().subtract(1,"years");if(this.calendarContainer.empty(),this.options.lengthOfTime.days)g=this.createDaysObject(this.intervalStart.clone(),this.intervalEnd.clone()),a={days:g,months:[],year:null,month:null,eventsLastMonth:[],eventsNextMonth:[],eventsThisMonth:[],extras:this.options.extras,daysOfTheWeek:this.daysOfTheWeek,daysOfTheWeekEn:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],intervalEnd:this.intervalEnd.clone(),numberOfRows:Math.ceil(g.length/7),intervalStart:this.intervalStart.clone(),eventsThisInterval:this.eventsThisInterval};else if(this.options.lengthOfTime.months){for(h=[],k=0,j=[],o=0;o<this.options.lengthOfTime.months;o++)l=this.intervalStart.clone().add(o,"months"),m=l.clone().endOf("month"),g=this.createDaysObject(l,m),j.push(this.eventsThisInterval),h.push({days:g,month:l});for(o in h)k+=Math.ceil(h[o].days.length/7);a={days:[],year:null,month:null,months:h,eventsThisMonth:[],numberOfRows:k,extras:this.options.extras,intervalEnd:this.intervalEnd,intervalStart:this.intervalStart,daysOfTheWeek:this.daysOfTheWeek,daysOfTheWeekEn:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],eventsLastMonth:this.eventsLastMonth,eventsNextMonth:this.eventsNextMonth,eventsThisInterval:j}}else g=this.createDaysObject(this.month.clone().startOf("month"),this.month.clone().endOf("month")),i=this.month,a={days:g,months:[],intervalEnd:null,intervalStart:null,year:this.month.year(),eventsThisInterval:null,extras:this.options.extras,month:this.month.format("MMMM"),daysOfTheWeek:this.daysOfTheWeek,daysOfTheWeekEn:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],eventsLastMonth:this.eventsLastMonth,eventsNextMonth:this.eventsNextMonth,numberOfRows:Math.ceil(g.length/7),eventsThisMonth:this.eventsThisInterval};if(this.options.render?this.calendarContainer.html(this.options.render.apply(this,[a])):this.calendarContainer.html(this.compiledClndrTemplate(a)),this.options.constraints){for(n in this.options.targets)n!=this.options.targets.day&&this.element.find("."+this.options.targets[n]).toggleClass(this.options.classes.inactive,!1);for(o in this.constraints)this.constraints[o]=!0;this.options.constraints.startDate&&(d=b(this.options.constraints.startDate)),this.options.constraints.endDate&&(c=b(this.options.constraints.endDate)),d&&(d.isAfter(this.intervalStart)||d.isSame(this.intervalStart,"day"))&&(this.element.find("."+this.options.targets.previousButton).toggleClass(this.options.classes.inactive,!0),this.constraints.previous=!this.constraints.previous),c&&(c.isBefore(this.intervalEnd)||c.isSame(this.intervalEnd,"day"))&&(this.element.find("."+this.options.targets.nextButton).toggleClass(this.options.classes.inactive,!0),this.constraints.next=!this.constraints.next),d&&d.isAfter(f)&&(this.element.find("."+this.options.targets.previousYearButton).toggleClass(this.options.classes.inactive,!0),this.constraints.previousYear=!this.constraints.previousYear),c&&c.isBefore(e)&&(this.element.find("."+this.options.targets.nextYearButton).toggleClass(this.options.classes.inactive,!0),this.constraints.nextYear=!this.constraints.nextYear),(d&&d.isAfter(b(),"month")||c&&c.isBefore(b(),"month"))&&(this.element.find("."+this.options.targets.today).toggleClass(this.options.classes.inactive,!0),this.constraints.today=!this.constraints.today)}this.options.doneRendering&&this.options.doneRendering.apply(this,[])},f.prototype.bindEvents=function(){var b=this,c=a(this.element),d=this.options.targets,e=b.options.classes,f=this.options.useTouchEvents===!0?"touchstart":"click",g=f+".clndr";c.off(g,"."+d.day).off(g,"."+d.empty).off(g,"."+d.nextButton).off(g,"."+d.todayButton).off(g,"."+d.previousButton).off(g,"."+d.nextYearButton).off(g,"."+d.previousYearButton),c.on(g,"."+d.day,function(c){var f,d=a(c.currentTarget);if(b.options.clickEvents.click&&(f=b.buildTargetObject(c.currentTarget,!0),b.options.clickEvents.click.apply(b,[f])),b.options.adjacentDaysChangeMonth&&(d.is("."+e.lastMonth)?b.backActionWithContext(b):d.is("."+e.nextMonth)&&b.forwardActionWithContext(b)),b.options.trackSelectedDate){if(b.options.ignoreInactiveDaysInSelection&&d.hasClass(e.inactive))return;b.options.selectedDate=b.getTargetDateString(c.currentTarget),d.siblings().removeClass(e.selected).end().addClass(e.selected)}}),c.on(g,"."+d.empty,function(c){var f,d=a(c.currentTarget);b.options.clickEvents.click&&(f=b.buildTargetObject(c.currentTarget,!1),b.options.clickEvents.click.apply(b,[f])),b.options.adjacentDaysChangeMonth&&(d.is("."+e.lastMonth)?b.backActionWithContext(b):d.is("."+e.nextMonth)&&b.forwardActionWithContext(b))}),data={context:this},c.on(g,"."+d.todayButton,data,this.todayAction).on(g,"."+d.nextButton,data,this.forwardAction).on(g,"."+d.previousButton,data,this.backAction).on(g,"."+d.nextYearButton,data,this.nextYearAction).on(g,"."+d.previousYearButton,data,this.previousYearAction)},f.prototype.buildTargetObject=function(c,d){var f,g,e={date:null,events:[],element:c};return d&&(f=this.getTargetDateString(c),e.date=f?b(f):null,this.options.events&&(g=this.options.multiDayEvents?function(){var a=e.date.isSame(this._clndrStartDateObject,"day"),b=e.date.isAfter(this._clndrStartDateObject,"day"),c=e.date.isSame(this._clndrEndDateObject,"day"),d=e.date.isBefore(this._clndrEndDateObject,"day");return(a||b)&&(c||d)}:function(){var a=this._clndrStartDateObject.format("YYYY-MM-DD");return a==f},e.events=a.makeArray(a(this.options.events).filter(g)))),e},f.prototype.getTargetDateString=function(a){var b=a.className.indexOf("calendar-day-");return-1!==b?a.className.substring(b+13,b+23):null},f.prototype.triggerEvents=function(a,c){var i,j,k,l,m,n,o,p,q,d=a.options.lengthOfTime,e=a.options.clickEvents,f={end:a.intervalEnd,start:a.intervalStart},g=[b(a.intervalStart),b(a.intervalEnd)],h=[b(a.month)];l=f.start.isAfter(c.start)&&(1==Math.abs(f.start.month()-c.start.month())||11===c.start.month()&&0===f.start.month()),m=f.start.isBefore(c.start)&&(1==Math.abs(c.start.month()-f.start.month())||0===c.start.month()&&11===f.start.month()),n=f.start.month()!==c.start.month()||f.start.year()!==c.start.year(),i=1===f.start.year()-c.start.year()||1===f.end.year()-c.end.year(),j=1===c.start.year()-f.start.year()||1===c.end.year()-f.end.year(),k=f.start.year()!==c.start.year(),d.days||d.months?(o=f.start.isAfter(c.start),p=f.start.isBefore(c.start),q=o||p,o&&e.nextInterval&&e.nextInterval.apply(a,g),p&&e.previousInterval&&e.previousInterval.apply(a,g),q&&e.onIntervalChange&&e.onIntervalChange.apply(a,g)):(l&&e.nextMonth&&e.nextMonth.apply(a,h),m&&e.previousMonth&&e.previousMonth.apply(a,h),n&&e.onMonthChange&&e.onMonthChange.apply(a,h),i&&e.nextYear&&e.nextYear.apply(a,h),j&&e.previousYear&&e.previousYear.apply(a,h),k&&e.onYearChange&&e.onYearChange.apply(a,h))},f.prototype.back=function(b){var d=arguments.length>1?arguments[1]:this,e=d.options.lengthOfTime,f={withCallbacks:!1},g={end:d.intervalEnd.clone(),start:d.intervalStart.clone()};return b=a.extend(!0,{},f,b),d.constraints.previous?(e.days?(d.intervalStart.subtract(e.interval,"days").startOf("day"),d.intervalEnd=d.intervalStart.clone().add(e.days-1,"days").endOf("day"),d.month=d.intervalStart.clone()):(d.intervalStart.subtract(e.interval,"months").startOf("month"),d.intervalEnd=d.intervalStart.clone().add(e.months||e.interval,"months").subtract(1,"days").endOf("month"),d.month=d.intervalStart.clone()),d.render(),b.withCallbacks&&d.triggerEvents(d,g),d):d},f.prototype.backAction=function(a){var b=a.data.context;b.backActionWithContext(b)},f.prototype.backActionWithContext=function(a){a.back({withCallbacks:!0},a)},f.prototype.previous=function(a){return this.back(a)},f.prototype.forward=function(b){var c=arguments.length>1?arguments[1]:this,d=c.options.lengthOfTime,e={withCallbacks:!1},f={end:c.intervalEnd.clone(),start:c.intervalStart.clone()};return b=a.extend(!0,{},e,b),c.constraints.next?(c.options.lengthOfTime.days?(c.intervalStart.add(d.interval,"days").startOf("day"),c.intervalEnd=c.intervalStart.clone().add(d.days-1,"days").endOf("day"),c.month=c.intervalStart.clone()):(c.intervalStart.add(d.interval,"months").startOf("month"),c.intervalEnd=c.intervalStart.clone().add(d.months||d.interval,"months").subtract(1,"days").endOf("month"),c.month=c.intervalStart.clone()),c.render(),b.withCallbacks&&c.triggerEvents(c,f),c):c},f.prototype.forwardAction=function(a){var b=a.data.context;b.forwardActionWithContext(b)},f.prototype.forwardActionWithContext=function(a){a.forward({withCallbacks:!0},a)},f.prototype.next=function(a){return this.forward(a)},f.prototype.previousYear=function(b){var c=arguments.length>1?arguments[1]:this,d={withCallbacks:!1},e={end:c.intervalEnd.clone(),start:c.intervalStart.clone()};return b=a.extend(!0,{},d,b),c.constraints.previousYear?(c.month.subtract(1,"year"),c.intervalStart.subtract(1,"year"),c.intervalEnd.subtract(1,"year"),c.render(),b.withCallbacks&&c.triggerEvents(c,e),c):c},f.prototype.previousYearAction=function(a){var b=a.data.context;b.previousYear({withCallbacks:!0},b)},f.prototype.nextYear=function(b){var c=arguments.length>1?arguments[1]:this,d={withCallbacks:!1},e={end:c.intervalEnd.clone(),start:c.intervalStart.clone()};return b=a.extend(!0,{},d,b),c.constraints.nextYear?(c.month.add(1,"year"),c.intervalStart.add(1,"year"),c.intervalEnd.add(1,"year"),c.render(),b.withCallbacks&&c.triggerEvents(c,e),c):c},f.prototype.nextYearAction=function(a){var b=a.data.context;b.nextYear({withCallbacks:!0},b)},f.prototype.today=function(c){var d=arguments.length>1?arguments[1]:this,e=d.options.lengthOfTime,f={withCallbacks:!1},g={end:d.intervalEnd.clone(),start:d.intervalStart.clone()};c=a.extend(!0,{},f,c),d.month=b().startOf("month"),e.days?(d.intervalStart=e.startDate?b().weekday(e.startDate.weekday()).startOf("day"):b().weekday(0).startOf("day"),d.intervalEnd=d.intervalStart.clone().add(e.days-1,"days").endOf("day")):(d.intervalStart=b().startOf("month"),d.intervalEnd=d.intervalStart.clone().add(e.months||e.interval,"months").subtract(1,"days").endOf("month")),d.intervalStart.isSame(g.start)&&d.intervalEnd.isSame(g.end)||d.render(),c.withCallbacks&&(d.options.clickEvents.today&&d.options.clickEvents.today.apply(d,[b(d.month)]),d.triggerEvents(d,g))},f.prototype.todayAction=function(a){var b=a.data.context;b.today({withCallbacks:!0},b)},f.prototype.setMonth=function(a,b){var c=this.options.lengthOfTime,d={end:this.intervalEnd.clone(),start:this.intervalStart.clone()};return c.days||c.months?(console.log("You are using a custom date interval. Use Clndr.setIntervalStart(startDate) instead."),this):(this.month.month(a),this.intervalStart=this.month.clone().startOf("month"),this.intervalEnd=this.intervalStart.clone().endOf("month"),this.render(),b&&b.withCallbacks&&this.triggerEvents(this,d),this)},f.prototype.setYear=function(a,b){var c={end:this.intervalEnd.clone(),start:this.intervalStart.clone()};return this.month.year(a),this.intervalEnd.year(a),this.intervalStart.year(a),this.render(),b&&b.withCallbacks&&this.triggerEvents(this,c),this},f.prototype.setIntervalStart=function(a,c){var d=this.options.lengthOfTime,e={end:this.intervalEnd.clone(),start:this.intervalStart.clone()};return d.days||d.months?(d.days?(this.intervalStart=b(a).startOf("day"),this.intervalEnd=this.intervalStart.clone().add(d-1,"days").endOf("day")):(this.intervalStart=b(a).startOf("month"),this.intervalEnd=this.intervalStart.clone().add(d.months||d.interval,"months").subtract(1,"days").endOf("month")),this.month=this.intervalStart.clone(),this.render(),c&&c.withCallbacks&&this.triggerEvents(this,e),this):(console.log("You are using a custom date interval. Use Clndr.setIntervalStart(startDate) instead."),this)},f.prototype.setEvents=function(a){return this.options.events=this.options.multiDayEvents?this.addMultiDayMomentObjectsToEvents(a):this.addMomentObjectToEvents(a),this.render(),this},f.prototype.addEvents=function(b){return this.options.events=this.options.multiDayEvents?a.merge(this.options.events,this.addMultiDayMomentObjectsToEvents(b)):a.merge(this.options.events,this.addMomentObjectToEvents(b)),this.render(),this},f.prototype.removeEvents=function(a){for(var b=this.options.events.length-1;b>=0;b--)1==a(this.options.events[b])&&this.options.events.splice(b,1);return this.render(),this},f.prototype.addMomentObjectToEvents=function(a){var c=0,d=this;for(c;c<a.length;c++)a[c]._clndrStartDateObject=b(a[c][d.options.dateParameter]),a[c]._clndrEndDateObject=b(a[c][d.options.dateParameter]);return a},f.prototype.addMultiDayMomentObjectsToEvents=function(a){var f,g,c=0,d=this,e=d.options.multiDayEvents;for(c;c<a.length;c++)f=a[c][e.endDate],g=a[c][e.startDate],f||g?(a[c]._clndrEndDateObject=b(f||g),a[c]._clndrStartDateObject=b(g||f)):(a[c]._clndrEndDateObject=b(a[c][e.singleDay]),a[c]._clndrStartDateObject=b(a[c][e.singleDay]));return a},f.prototype.calendarDay=function(b){var c={day:"",date:null,events:[],classes:this.options.targets.empty};return a.extend({},c,b)},f.prototype.destroy=function(){var b=a(this.calendarContainer);b.parent().data("plugin_clndr",null),this.options=e,b.empty().remove(),this.element=null},a.fn.clndr=function(a){var b;if(this.length>1)throw new Error("CLNDR does not support multiple elements yet. Make sure your clndr selector returns only one element.");if(!this.length)throw new Error("CLNDR cannot be instantiated on an empty selector.");return this.data("plugin_clndr")?this.data("plugin_clndr"):(b=new f(this,a),this.data("plugin_clndr",b),b)}})),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(a){"use strict";function d(b){var c=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(b.target).ajaxSubmit(c))}function e(b){var e,f,g,c=b.target,d=a(c);if(!d.is("[type=submit],[type=image]")){if(e=d.closest("[type=submit]"),0===e.length)return;c=e[0]}f=this,f.clk=c,"image"==c.type&&(void 0!==b.offsetX?(f.clk_x=b.offsetX,f.clk_y=b.offsetY):"function"==typeof a.fn.offset?(g=d.offset(),f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top):(f.clk_x=b.pageX-c.offsetLeft,f.clk_y=b.pageY-c.offsetTop)),setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)}function f(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}var c,b={};b.fileapi=void 0!==a("<input type='file'/>").get(0).files,b.formdata=void 0!==window.FormData,c=!!a.fn.prop,a.fn.attr2=function(){if(!c)return this.attr.apply(this,arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"==typeof a?a:this.attr.apply(this,arguments)},a.fn.ajaxSubmit=function(d){function B(b){var g,h,c=a.param(b,d.traditional).split("&"),e=c.length,f=[];for(g=0;e>g;g++)c[g]=c[g].replace(/\+/g," "),h=c[g].split("="),f.push([decodeURIComponent(h[0]),decodeURIComponent(h[1])]);return f}function C(b){var f,g,h,i,c=new FormData;for(f=0;f<b.length;f++)c.append(b[f].name,b[f].value);if(d.extraData)for(g=B(d.extraData),f=0;f<g.length;f++)g[f]&&c.append(g[f][0],g[f][1]);return d.data=null,h=a.extend(!0,{},a.ajaxSettings,d,{contentType:!1,processData:!1,cache:!1,type:e||"POST"}),d.uploadProgress&&(h.xhr=function(){var b=a.ajaxSettings.xhr();return b.upload&&b.upload.addEventListener("progress",function(a){var b=0,c=a.loaded||a.position,e=a.total;a.lengthComputable&&(b=Math.ceil(100*(c/e))),d.uploadProgress(a,c,e,b)},!1),b}),h.data=null,i=h.beforeSend,h.beforeSend=function(a,b){b.data=d.formData?d.formData:c,i&&i.call(this,a,b)},a.ajax(h)}function D(b){function y(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(c){f("cannot get iframe.contentWindow document: "+c)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(c){f("cannot get iframe.contentDocument: "+c),b=a.document}return b}function B(){function j(){try{var a=y(p).readyState;f("state = "+a),a&&"uninitialized"==a.toLowerCase()&&setTimeout(j,50)}catch(b){f("Server abort: ",b," (",b.name,")"),G(x),u&&clearTimeout(u),u=void 0}}var l,m,r,b=i.attr2("target"),c=i.attr2("action"),d="multipart/form-data",h=i.attr("enctype")||i.attr("encoding")||d;g.setAttribute("target",n),(!e||/post/i.test(e))&&g.setAttribute("method","POST"),c!=k.url&&g.setAttribute("action",k.url),k.skipEncodingOverride||e&&!/post/i.test(e)||i.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),k.timeout&&(u=setTimeout(function(){t=!0,G(w)},k.timeout)),l=[];try{if(k.extraData)for(m in k.extraData)k.extraData.hasOwnProperty(m)&&(a.isPlainObject(k.extraData[m])&&k.extraData[m].hasOwnProperty("name")&&k.extraData[m].hasOwnProperty("value")?l.push(a('<input type="hidden" name="'+k.extraData[m].name+'">').val(k.extraData[m].value).appendTo(g)[0]):l.push(a('<input type="hidden" name="'+m+'">').val(k.extraData[m]).appendTo(g)[0]));k.iframeTarget||o.appendTo("body"),p.attachEvent?p.attachEvent("onload",G):p.addEventListener("load",G,!1),setTimeout(j,15);try{g.submit()}catch(q){r=document.createElement("form").submit,r.apply(g)}}finally{g.setAttribute("action",c),g.setAttribute("enctype",h),b?g.setAttribute("target",b):i.removeAttr("target"),a(l).remove()}}function G(b){var d,c,e,g,h,i,j,l,n;if(!q.aborted&&!F){if(D=y(p),D||(f("cannot access response document"),b=x),b===w&&q)return q.abort("timeout"),v.reject(q,"timeout"),void 0;if(b==x&&q)return q.abort("server abort"),v.reject(q,"error","server abort"),void 0;if(D&&D.location.href!=k.iframeSrc||t){p.detachEvent?p.detachEvent("onload",G):p.removeEventListener("load",G,!1),c="success";try{if(t)throw"timeout";if(e="xml"==k.dataType||D.XMLDocument||a.isXMLDoc(D),f("isXml="+e),!e&&window.opera&&(null===D.body||!D.body.innerHTML)&&--E)return f("requeing onLoad callback, DOM not available"),setTimeout(G,250),void 0;g=D.body?D.body:D.documentElement,q.responseText=g?g.innerHTML:null,q.responseXML=D.XMLDocument?D.XMLDocument:D,e&&(k.dataType="xml"),q.getResponseHeader=function(a){var b={"content-type":k.dataType};return b[a.toLowerCase()]},g&&(q.status=Number(g.getAttribute("status"))||q.status,q.statusText=g.getAttribute("statusText")||q.statusText),h=(k.dataType||"").toLowerCase(),i=/(json|script|text)/.test(h),i||k.textarea?(j=D.getElementsByTagName("textarea")[0],j?(q.responseText=j.value,q.status=Number(j.getAttribute("status"))||q.status,q.statusText=j.getAttribute("statusText")||q.statusText):i&&(l=D.getElementsByTagName("pre")[0],n=D.getElementsByTagName("body")[0],l?q.responseText=l.textContent?l.textContent:l.innerText:n&&(q.responseText=n.textContent?n.textContent:n.innerText))):"xml"==h&&!q.responseXML&&q.responseText&&(q.responseXML=H(q.responseText));try{C=J(q,h,k)}catch(r){c="parsererror",q.error=d=r||c}}catch(r){f("error caught: ",r),c="error",q.error=d=r||c}q.aborted&&(f("upload aborted"),c=null),q.status&&(c=q.status>=200&&q.status<300||304===q.status?"success":"error"),"success"===c?(k.success&&k.success.call(k.context,C,"success",q),v.resolve(q.responseText,"success",q),m&&a.event.trigger("ajaxSuccess",[q,k])):c&&(void 0===d&&(d=q.statusText),k.error&&k.error.call(k.context,q,c,d),v.reject(q,"error",d),m&&a.event.trigger("ajaxError",[q,k,d])),m&&a.event.trigger("ajaxComplete",[q,k]),m&&!--a.active&&a.event.trigger("ajaxStop"),k.complete&&k.complete.call(k.context,q,c),F=!0,k.timeout&&clearTimeout(u),setTimeout(function(){k.iframeTarget?o.attr("src",k.iframeSrc):o.remove(),q.responseXML=null
},100)}}}var h,j,k,m,n,o,p,q,r,s,t,u,w,x,z,A,C,D,F,E,H,I,J,g=i[0],v=a.Deferred();if(v.abort=function(a){q.abort(a)},b)for(j=0;j<l.length;j++)h=a(l[j]),c?h.prop("disabled",!1):h.removeAttr("disabled");return k=a.extend(!0,{},a.ajaxSettings,d),k.context=k.context||k,n="jqFormIO"+(new Date).getTime(),k.iframeTarget?(o=a(k.iframeTarget),s=o.attr2("name"),s?n=s:o.attr2("name",n)):(o=a('<iframe name="'+n+'" src="'+k.iframeSrc+'" />'),o.css({position:"absolute",top:"-1000px",left:"-1000px"})),p=o[0],q={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(b){var c="timeout"===b?"timeout":"aborted";f("aborting upload... "+c),this.aborted=1;try{p.contentWindow.document.execCommand&&p.contentWindow.document.execCommand("Stop")}catch(d){}o.attr("src",k.iframeSrc),q.error=c,k.error&&k.error.call(k.context,q,c,b),m&&a.event.trigger("ajaxError",[q,k,c]),k.complete&&k.complete.call(k.context,q,c)}},m=k.global,m&&0===a.active++&&a.event.trigger("ajaxStart"),m&&a.event.trigger("ajaxSend",[q,k]),k.beforeSend&&k.beforeSend.call(k.context,q,k)===!1?(k.global&&a.active--,v.reject(),v):q.aborted?(v.reject(),v):(r=g.clk,r&&(s=r.name,s&&!r.disabled&&(k.extraData=k.extraData||{},k.extraData[s]=r.value,"image"==r.type&&(k.extraData[s+".x"]=g.clk_x,k.extraData[s+".y"]=g.clk_y))),w=1,x=2,z=a("meta[name=csrf-token]").attr("content"),A=a("meta[name=csrf-param]").attr("content"),A&&z&&(k.extraData=k.extraData||{},k.extraData[A]=z),k.forceSync?B():setTimeout(B,10),E=50,H=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},I=a.parseJSON||function(a){return window["eval"]("("+a+")")},J=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f="xml"===c||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;return f&&"parsererror"===g.documentElement.nodeName&&a.error&&a.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),"string"==typeof g&&("json"===c||!c&&e.indexOf("json")>=0?g=I(g):("script"===c||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g)),g},v)}var e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;if(!this.length)return f("ajaxSubmit: skipping submit process - no element selected"),this;if(i=this,"function"==typeof d?d={success:d}:void 0===d&&(d={}),e=d.type||this.attr2("method"),g=d.url||this.attr2("action"),h="string"==typeof g?a.trim(g):"",h=h||window.location.href||"",h&&(h=(h.match(/^([^#]+)/)||[])[1]),d=a.extend(!0,{url:h,success:a.ajaxSettings.success,type:e||a.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},d),j={},this.trigger("form-pre-serialize",[this,d,j]),j.veto)return f("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(d.beforeSerialize&&d.beforeSerialize(this,d)===!1)return f("ajaxSubmit: submit aborted via beforeSerialize callback"),this;if(k=d.traditional,void 0===k&&(k=a.ajaxSettings.traditional),l=[],n=this.formToArray(d.semantic,l),d.data&&(d.extraData=d.data,m=a.param(d.data,k)),d.beforeSubmit&&d.beforeSubmit(n,this,d)===!1)return f("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[n,this,d,j]),j.veto)return f("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;for(o=a.param(n,k),m&&(o=o?o+"&"+m:m),"GET"==d.type.toUpperCase()?(d.url+=(d.url.indexOf("?")>=0?"&":"?")+o,d.data=null):d.data=o,p=[],d.resetForm&&p.push(function(){i.resetForm()}),d.clearForm&&p.push(function(){i.clearForm(d.includeHidden)}),!d.dataType&&d.target?(q=d.success||function(){},p.push(function(b){var c=d.replaceTarget?"replaceWith":"html";a(d.target)[c](b).each(q,arguments)})):d.success&&p.push(d.success),d.success=function(a,b,c){var f,g,e=d.context||this;for(f=0,g=p.length;g>f;f++)p[f].apply(e,[a,b,c||i,i])},d.error&&(r=d.error,d.error=function(a,b,c){var e=d.context||this;r.apply(e,[a,b,c,i])}),d.complete&&(s=d.complete,d.complete=function(a,b){var c=d.context||this;s.apply(c,[a,b,i])}),t=a("input[type=file]:enabled",this).filter(function(){return""!==a(this).val()}),u=t.length>0,v="multipart/form-data",w=i.attr("enctype")==v||i.attr("encoding")==v,x=b.fileapi&&b.formdata,f("fileAPI :"+x),y=(u||w)&&!x,d.iframe!==!1&&(d.iframe||y)?d.closeKeepAlive?a.get(d.closeKeepAlive,function(){z=D(n)}):z=D(n):z=(u||w)&&x?C(n):a.ajax(d),i.removeData("jqxhr").data("jqxhr",z),A=0;A<l.length;A++)l[A]=null;return this.trigger("form-submit-notify",[this,d]),this},a.fn.ajaxForm=function(b){if(b=b||{},b.delegation=b.delegation&&a.isFunction(a.fn.on),!b.delegation&&0===this.length){var c={s:this.selector,c:this.context};return!a.isReady&&c.s?(f("DOM not ready, queuing ajaxForm"),a(function(){a(c.s,c.c).ajaxForm(b)}),this):(f("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return b.delegation?(a(document).off("submit.form-plugin",this.selector,d).off("click.form-plugin",this.selector,e).on("submit.form-plugin",this.selector,b,d).on("click.form-plugin",this.selector,b,e),this):this.ajaxFormUnbind().bind("submit.form-plugin",b,d).bind("click.form-plugin",b,e)},a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(c,d){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,e=[];if(0===this.length)return e;if(f=this[0],g=this.attr("id"),h=c?f.getElementsByTagName("*"):f.elements,h&&!/MSIE [678]/.test(navigator.userAgent)&&(h=a(h).get()),g&&(i=a(':input[form="'+g+'"]').get(),i.length&&(h=(h||[]).concat(i))),!h||!h.length)return e;for(j=0,o=h.length;o>j;j++)if(n=h[j],l=n.name,l&&!n.disabled)if(c&&f.clk&&"image"==n.type)f.clk==n&&(e.push({name:l,value:a(n).val(),type:n.type}),e.push({name:l+".x",value:f.clk_x},{name:l+".y",value:f.clk_y}));else if(m=a.fieldValue(n,!0),m&&m.constructor==Array)for(d&&d.push(n),k=0,p=m.length;p>k;k++)e.push({name:l,value:m[k]});else if(b.fileapi&&"file"==n.type)if(d&&d.push(n),q=n.files,q.length)for(k=0;k<q.length;k++)e.push({name:l,value:q[k],type:n.type});else e.push({name:l,value:"",type:n.type});else null!==m&&"undefined"!=typeof m&&(d&&d.push(n),e.push({name:l,value:m,type:n.type,required:n.required}));return!c&&f.clk&&(r=a(f.clk),s=r[0],l=s.name,l&&!s.disabled&&"image"==s.type&&(e.push({name:l,value:r.val()}),e.push({name:l+".x",value:f.clk_x},{name:l+".y",value:f.clk_y}))),e},a.fn.formSerialize=function(b){return a.param(this.formToArray(b))},a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var e,f,g,d=this.name;if(d)if(e=a.fieldValue(this,b),e&&e.constructor==Array)for(f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&"undefined"!=typeof e&&c.push({name:this.name,value:e})}),a.param(c)},a.fn.fieldValue=function(b){var c,d,e,f,g;for(c=[],d=0,e=this.length;e>d;d++)f=this[d],g=a.fieldValue(f,b),null===g||"undefined"==typeof g||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(c,g):c.push(g));return c},a.fieldValue=function(b,c){var g,h,i,j,k,l,m,n,d=b.name,e=b.type,f=b.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||b.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!b.checked||("submit"==e||"image"==e)&&b.form&&b.form.clk!=b||"select"==f&&-1==b.selectedIndex))return null;if("select"==f){if(g=b.selectedIndex,0>g)return null;for(h=[],i=b.options,j="select-one"==e,k=j?g+1:i.length,l=j?g:0;k>l;l++)if(m=i[l],m.selected){if(n=m.value,n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),j)return n;h.push(n)}return h}return a(b).val()},a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})},a.fn.clearFields=a.fn.clearInputs=function(b){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone(!0)):a(this).val(""):b&&(b===!0&&/hidden/.test(d)||"string"==typeof b&&a(this).is(b))&&(this.value="")})},a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(b){return void 0===b&&(b=!0),this.each(function(){var d,c=this.type;"checkbox"==c||"radio"==c?this.checked=b:"option"==this.tagName.toLowerCase()&&(d=a(this).parent("select"),b&&d[0]&&"select-one"==d[0].type&&d.find("option").selected(!1),this.selected=b)})},a.fn.ajaxSubmit.debug=!1}),function(a){var b=function(a,b){return a<<b|a>>>32-b},c=function(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f},d=function(a,b,c){return a&b|~a&c},e=function(a,b,c){return a&c|b&~c},f=function(a,b,c){return a^b^c},g=function(a,b,c){return b^(a|~c)},h=function(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)},i=function(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)},j=function(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)},k=function(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)},l=function(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=8*(i%4),g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=8*(i%4),g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g},m=function(a){var d,e,b="",c="";for(e=0;3>=e;e++)d=255&a>>>8*e,c="0"+d.toString(16),b+=c.substr(c.length-2,2);return b},n=function(a){var b,c,d;for(a=a.replace(/\x0d\x0a/g,"\n"),b="",c=0;c<a.length;c++)d=a.charCodeAt(c),128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(192|d>>6),b+=String.fromCharCode(128|63&d)):(b+=String.fromCharCode(224|d>>12),b+=String.fromCharCode(128|63&d>>6),b+=String.fromCharCode(128|63&d));return b};a.extend({md5:function(a){var d,e,f,g,o,p,q,r,s,J,b=Array(),t=7,u=12,v=17,w=22,x=5,y=9,z=14,A=20,B=4,C=11,D=16,E=23,F=6,G=10,H=15,I=21;for(a=n(a),b=l(a),p=1732584193,q=4023233417,r=2562383102,s=271733878,d=0;d<b.length;d+=16)e=p,f=q,g=r,o=s,p=h(p,q,r,s,b[d+0],t,3614090360),s=h(s,p,q,r,b[d+1],u,3905402710),r=h(r,s,p,q,b[d+2],v,606105819),q=h(q,r,s,p,b[d+3],w,3250441966),p=h(p,q,r,s,b[d+4],t,4118548399),s=h(s,p,q,r,b[d+5],u,1200080426),r=h(r,s,p,q,b[d+6],v,2821735955),q=h(q,r,s,p,b[d+7],w,4249261313),p=h(p,q,r,s,b[d+8],t,1770035416),s=h(s,p,q,r,b[d+9],u,2336552879),r=h(r,s,p,q,b[d+10],v,4294925233),q=h(q,r,s,p,b[d+11],w,2304563134),p=h(p,q,r,s,b[d+12],t,1804603682),s=h(s,p,q,r,b[d+13],u,4254626195),r=h(r,s,p,q,b[d+14],v,2792965006),q=h(q,r,s,p,b[d+15],w,1236535329),p=i(p,q,r,s,b[d+1],x,4129170786),s=i(s,p,q,r,b[d+6],y,3225465664),r=i(r,s,p,q,b[d+11],z,643717713),q=i(q,r,s,p,b[d+0],A,3921069994),p=i(p,q,r,s,b[d+5],x,3593408605),s=i(s,p,q,r,b[d+10],y,38016083),r=i(r,s,p,q,b[d+15],z,3634488961),q=i(q,r,s,p,b[d+4],A,3889429448),p=i(p,q,r,s,b[d+9],x,568446438),s=i(s,p,q,r,b[d+14],y,3275163606),r=i(r,s,p,q,b[d+3],z,4107603335),q=i(q,r,s,p,b[d+8],A,1163531501),p=i(p,q,r,s,b[d+13],x,2850285829),s=i(s,p,q,r,b[d+2],y,4243563512),r=i(r,s,p,q,b[d+7],z,1735328473),q=i(q,r,s,p,b[d+12],A,2368359562),p=j(p,q,r,s,b[d+5],B,4294588738),s=j(s,p,q,r,b[d+8],C,2272392833),r=j(r,s,p,q,b[d+11],D,1839030562),q=j(q,r,s,p,b[d+14],E,4259657740),p=j(p,q,r,s,b[d+1],B,2763975236),s=j(s,p,q,r,b[d+4],C,1272893353),r=j(r,s,p,q,b[d+7],D,4139469664),q=j(q,r,s,p,b[d+10],E,3200236656),p=j(p,q,r,s,b[d+13],B,681279174),s=j(s,p,q,r,b[d+0],C,3936430074),r=j(r,s,p,q,b[d+3],D,3572445317),q=j(q,r,s,p,b[d+6],E,76029189),p=j(p,q,r,s,b[d+9],B,3654602809),s=j(s,p,q,r,b[d+12],C,3873151461),r=j(r,s,p,q,b[d+15],D,530742520),q=j(q,r,s,p,b[d+2],E,3299628645),p=k(p,q,r,s,b[d+0],F,4096336452),s=k(s,p,q,r,b[d+7],G,1126891415),r=k(r,s,p,q,b[d+14],H,2878612391),q=k(q,r,s,p,b[d+5],I,4237533241),p=k(p,q,r,s,b[d+12],F,1700485571),s=k(s,p,q,r,b[d+3],G,2399980690),r=k(r,s,p,q,b[d+10],H,4293915773),q=k(q,r,s,p,b[d+1],I,2240044497),p=k(p,q,r,s,b[d+8],F,1873313359),s=k(s,p,q,r,b[d+15],G,4264355552),r=k(r,s,p,q,b[d+6],H,2734768916),q=k(q,r,s,p,b[d+13],I,1309151649),p=k(p,q,r,s,b[d+4],F,4149444226),s=k(s,p,q,r,b[d+11],G,3174756917),r=k(r,s,p,q,b[d+2],H,718787259),q=k(q,r,s,p,b[d+9],I,3951481745),p=c(p,e),q=c(q,f),r=c(r,g),s=c(s,o);return J=m(p)+m(q)+m(r)+m(s),J.toLowerCase()}})}(jQuery),angular.module("tm.pagination",[]).directive("tmPagination",[function(){return{restrict:"EA",template:'<div class="page-list"><ul class="pagination" ng-show="conf.totalItems > 0"><li ng-class="{disabled: conf.currentPage == 1}" ng-click="prevPage()"><span>&laquo;</span></li><li ng-repeat="item in pageList track by $index" ng-class="{active: item == conf.currentPage, separate: item == \'...\'}" ng-click="changeCurrentPage(item)"><span>{{ item }}</span></li><li ng-class="{disabled: conf.currentPage == conf.numberOfPages}" ng-click="nextPage()"><span>&raquo;</span></li></ul><div class="page-total" ng-show="conf.totalItems > 0">第<input type="text" ng-model="jumpPageNum"  ng-keyup="jumpToPage($event)"/>页 /共<strong>{{ conf.totalItems }}</strong>条</div><div class="no-items" ng-show="conf.totalItems <= 0">暂无数据</div></div>',replace:!0,scope:{conf:"="},link:function(a){function d(){var b,c,d,e;for(a.conf.currentPage=parseInt(a.conf.currentPage)?parseInt(a.conf.currentPage):1,a.conf.totalItems=parseInt(a.conf.totalItems),a.conf.rememberPerPage?(parseInt(localStorage[a.conf.rememberPerPage])||(localStorage[a.conf.rememberPerPage]=parseInt(a.conf.itemsPerPage)?parseInt(a.conf.itemsPerPage):15),a.conf.itemsPerPage=parseInt(localStorage[a.conf.rememberPerPage])):a.conf.itemsPerPage=parseInt(a.conf.itemsPerPage)?parseInt(a.conf.itemsPerPage):15,a.conf.numberOfPages=Math.ceil(a.conf.totalItems/a.conf.itemsPerPage),a.conf.currentPage<1&&(a.conf.currentPage=1),a.conf.currentPage>a.conf.numberOfPages&&(a.conf.currentPage=a.conf.numberOfPages),a.jumpPageNum=a.conf.currentPage,b=a.conf.perPageOptions.length,d=0;b>d;d++)a.conf.perPageOptions[d]==a.conf.itemsPerPage&&(c=!0);if(c||a.conf.perPageOptions.push(a.conf.itemsPerPage),a.conf.perPageOptions.sort(function(a,b){return a-b}),a.pageList=[],a.conf.numberOfPages<=a.conf.pagesLength)for(d=1;d<=a.conf.numberOfPages;d++)a.pageList.push(d);else if(e=(a.conf.pagesLength-1)/2,a.conf.currentPage<=e){for(d=1;e+1>=d;d++)a.pageList.push(d);a.pageList.push("..."),a.pageList.push(a.conf.numberOfPages)}else if(a.conf.currentPage>a.conf.numberOfPages-e){for(a.pageList.push(1),a.pageList.push("..."),d=e+1;d>=1;d--)a.pageList.push(a.conf.numberOfPages-d);a.pageList.push(a.conf.numberOfPages)}else{for(a.pageList.push(1),a.pageList.push("..."),d=Math.ceil(e/2);d>=1;d--)a.pageList.push(a.conf.currentPage-d);for(a.pageList.push(a.conf.currentPage),d=1;e/2>=d;d++)a.pageList.push(a.conf.currentPage+d);a.pageList.push("..."),a.pageList.push(a.conf.numberOfPages)}a.conf.onChange&&a.conf.onChange(),a.$parent.conf=a.conf}a.changeCurrentPage=function(b){"..."!=b&&(a.conf.currentPage=b)},a.conf.pagesLength=parseInt(a.conf.pagesLength)?parseInt(a.conf.pagesLength):9,0===a.conf.pagesLength%2&&(a.conf.pagesLength=a.conf.pagesLength-1),a.conf.perPageOptions||(a.conf.perPageOptions=[10,15,20,30,50]),a.prevPage=function(){a.conf.currentPage>1&&(a.conf.currentPage-=1)},a.nextPage=function(){a.conf.currentPage<a.conf.numberOfPages&&(a.conf.currentPage+=1)},a.jumpToPage=function(){a.jumpPageNum=a.jumpPageNum.replace(/[^0-9]/g,""),""!==a.jumpPageNum&&(a.conf.currentPage=a.jumpPageNum)},a.changeItemsPerPage=function(){a.conf.rememberPerPage&&localStorage.removeItem(a.conf.rememberPerPage)},a.$watch(function(){var b=a.conf.currentPage+" "+a.conf.totalItems+" ";return b+=a.conf.rememberPerPage?localStorage[a.conf.rememberPerPage]?localStorage[a.conf.rememberPerPage]:a.conf.itemsPerPage:a.conf.itemsPerPage},d)}}}]),postData=function(a,b,c){$.ajax({url:a,method:"POST",data:b,dataType:"json",beforeSend:function(){$(".mask").show()},xhrFields:{withCredentials:!0},success:function(a){c(a)},complete:function(){$(".mask").hide()}})},getData=function(a,b,c){$.ajax({url:a,method:"GET",data:c,dataType:"json",beforeSend:function(){$(".mask").show()},xhrFields:{withCredentials:!0},success:function(a){b(a)},complete:function(){$(".mask").hide()}})},checkInputInObj=function(a){var c,b=1;for(c in a)if(!a[c]){b=0;break}return b};